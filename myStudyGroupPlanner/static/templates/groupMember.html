<head>
  <link rel="stylesheet" href="../styleSheets/styles.css">
</head>


<div class="member" ng-show="vm.userAMember">
  <h1>{{vm.groupInfo.groupName}}</h1>
  <div class="chatBoard">
	<div class="chat">
  <div ng-repeat="msg in vm.messages">
	<p>{{msg.userId}}: {{msg.message}}</p>
	<p>{{msg.dateTime}}</p>
  </div>
  <form role="form">
	<textarea name="comments" id="comments" ng-model="vm.chatFields.message">
	Type a message....
	</textarea>
	<button id="subMsg" type="submit" class="btn btn-default" ng-click="vm.sendMessage()">Send</button>
</form>
</div>
  </div>
  <div class="memberEvents" ng-show="vm.userAMember">
	<div class="calendar">
	  <div pickadate ng-model="vm.date" format="mm/dd/yyyy"></div>
	  <div class="selected-date">Selected date is {{vm.date || '(no date selected)'}}</div>
	</div>

	<div class="upcoming_events" ng-show="vm.userAMember">
	  <div class="meetings" ng-repeat="meeting in vm.meetings">
	    <ul ng-repeat="detail in meeting">
	      {{detail}}
	    </ul>
	  </div>
	</div>
  </div>


<div class="container" ng-show="vm.isCreator">
      <!-- Trigger the modal with a button -->
      <button type="button" class="btn btn-success" data-toggle="modal" data-target="#meetingModal">Create Meeting</button>
      <!-- Modal -->
      <div class="modal fade" id="meetingModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Create Meeeting  {{vm.meetingDate}}</h4>
            </div>
            <div class="modal-body">
              <form name="meetingForm" role="form">
              	Title:
              	<input type="text" ng-model="vm.meetingTitle">
                
                <br>
		            <div class="timeSelection">
		            	<div>
				        	Date:
						    <input type="date" name="date" ng-model="vm.startTime" class="glyphicon glyphicon-calendar">
						    <span ng-show="meetingFrom.date.$required">
						      The date is required
						    </span>
				            <input type="time" ng-model="vm.startTime">
		                </div>
		                <span>to </span>
		                <div>
				            Date:
						    <input type="date" name="date" ng-model="vm.endTime" class="glyphicon glyphicon-calendar">
						    <span ng-show="meetingFrom.date.$required">
						      The date is required
						    </span>
				            <input type="time" ng-model="vm.endTime">
		                </div>
		            </div>
		            Location:
		            <div class="locationSelection">
		              <select ng-model="vm.selectedBuilding">
		                <option value="" disabled selected hidden>Select Building</option>
		                <option ng-repeat="building in vm.buildings">{{building}}</option>
		              </select>
		            </div>
		            <div class="locationSelection">
		              <select ng-model="vm.selectedRoom">
		                <option value="" disabled selected hidden>Select Room</option>
		                <option ng-repeat="room in vm.rooms">{{room}}</option>
		              </select>
		            </div>
		            Comment:
                <br />
                <input type="text" id="meetingNotes" ng-model="vm.meetingComments">
              </form>

            </div>
            
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-success" ng-click="vm.createMeeting()" data-dismiss="modal">Save changes</button>
            </div>
          </div>
        </div>
      </div>
    </div>


  <div class="members" ng-show="vm.userAMember">
	<h3>Members: {{vm.test}}</h3>
	<table>
		<tr>
			<th>Name</th>
			<th>Report User</th>
			<th ng-show="vm.isCreator">Remove User</th>
		</tr>
		<tr ng-repeat="member in vm.groupUsers">
			<td>{{member.msgpUsername}}</td>
			<td>
				<button type="button" class="btn btn-warning btn-info btn-xs" data-toggle="modal" data-target="#reportModal">Report</button>
				<div id="reportModal" class="modal fade" role="dialog">
					<div class="modal-dialog">

						<!-- Modal content-->
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h4 class="modal-title">Report</h4>
							</div>
							<div class="modal-body">
								<form role="form" name=report>
									<label for="reporter">Reporter:</label>
									<input type="text" class="form-control" ng-model="vm.reportFields.reporterName" placeholder="Reportee's Name">
									<label for="reportee">Reportee:</label>
									<input type="text" class="form-control" ng-model="vm.reportFields.reporteeName" placeholder="Reportee's Name">
									<label for="comment">Comment:</label>
									<textarea class="form-control" rows="5" id="comment" ng-model="vm.reportFields.reportComments"></textarea>
									<input type="text" class="form-control" ng-model="vm.reportFields.date" placeholder="Date"/>
									<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
									<button type="submit" class="btn btn-default" ng-click="vm.reportUser()">Report</button>
								</form>
							</div>
							<div class="modal-footer"></div>
						</div>
					</div>
				</div>
			</td>

			<td ng-show="vm.isCreator">
				<div class="removeContainer">
					<button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#removeModal" ng-click="vm.setUserLeavingGroup(member)" ng-hide="vm.isUserCreator(member.msgpUserId)">Remove</button>
				  <!-- Modal -->
					<div class="modal fade" id="removeModal" role="dialog">
						<div class="modal-dialog">
							<!-- Modal content-->
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<h4 class="modal-title">Confirm to remove this member from the group</h4>
								</div>
								<div class="modal-body">
									<p>Are you sure you want to remove this member the group?</p>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-success" ng-click="vm.leaveGroup()" data-dismiss="modal">Yes</button>
									<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</td>

		</tr>
	</table>
  </div>
</div>


<div class="leaveGroup" ng-show="vm.userAMember">
  <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#leaveModal">Leave Group</button>
  <!-- Modal -->
  <div class="modal fade" id="leaveModal" role="dialog">
	<div class="modal-dialog">
	  <!-- Modal content-->
	  <div class="modal-content">
	    <div class="modal-header">
	      <button type="button" class="close" data-dismiss="modal">&times;</button>
	      <h4 class="modal-title">Confirm to leave</h4>
	    </div>
	    <div class="modal-body">
	      <p>Are you sure you want to leave the group?</p>
	      <p ng-show="vm.isCreator"><strong>You are the group creator.  This will delete the group!</strong></p>
	      <p><strong>{{vm.leaveGroupStatus}}</strong></p>
	    </div>
	    <div class="modal-footer">
	      <button type="button" class="btn btn-success" ng-click="vm.leaveGroup()">Yes</button>
	      <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	    </div>
	  </div>
	</div>
  </div>
</div>



